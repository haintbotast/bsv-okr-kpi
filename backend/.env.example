# =============================================================================
# HỆ THỐNG QUẢN LÝ KPI - BIẾN MÔI TRƯỜNG
# =============================================================================
#
# QUAN TRỌNG: Copy file này thành .env và cập nhật các giá trị
# Lệnh: cp .env.example .env
#
# Lưu ý bảo mật:
# - KHÔNG BAO GIỜ commit file .env vào Git
# - Tạo SECRET_KEY mạnh: openssl rand -hex 32
# - Dùng mật khẩu mạnh (tối thiểu 12 ký tự, chữ hoa/thường, số, ký tự đặc biệt)
# - Cập nhật CORS_ORIGINS với domain thật của bạn
# =============================================================================

# =============================================================================
# ỨNG DỤNG
# =============================================================================

APP_NAME=Hệ Thống Quản Lý KPI
APP_VERSION=1.0.0
ENVIRONMENT=production
# Tùy chọn: development, staging, production

# =============================================================================
# BẢO MẬT - QUAN TRỌNG: PHẢI THAY ĐỔI CÁC GIÁ TRỊ NÀY!
# =============================================================================

# Tạo bằng lệnh: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-min-32-chars-CHANGE-THIS-IN-PRODUCTION

# Cấu hình JWT
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480
# 480 phút = 8 giờ (một ngày làm việc)
REFRESH_TOKEN_EXPIRE_DAYS=7
# 7 ngày = một tuần

# =============================================================================
# CƠ SỞ DỮ LIỆU
# =============================================================================

# Đường dẫn database SQLite (tương đối với container)
DATABASE_URL=sqlite:////data/database/kpi.db

# Tối ưu hóa SQLite
# Bật WAL mode để xử lý đồng thời tốt hơn (thiết lập trong init script)
# PRAGMA journal_mode=WAL
# PRAGMA synchronous=NORMAL
# PRAGMA cache_size=10000

# =============================================================================
# LƯU TRỮ FILE
# =============================================================================

# Thư mục upload
UPLOAD_DIR=/data/uploads

# Kích thước file tối đa (đơn vị bytes)
# 52428800 bytes = 50 MB
MAX_UPLOAD_SIZE=52428800

# Định dạng file cho phép (phân cách bằng dấu phẩy, không có khoảng trắng)
ALLOWED_EXTENSIONS=pdf,doc,docx,xls,xlsx,ppt,pptx,jpg,jpeg,png,gif

# Chiến lược đặt tên file
# Tùy chọn: uuid, timestamp, original
FILE_NAMING_STRATEGY=uuid

# =============================================================================
# CẤU HÌNH SAO LƯU
# =============================================================================

# Thư mục sao lưu
BACKUP_DIR=/data/backups

# Thời gian lưu trữ bản sao lưu (đơn vị ngày)
BACKUP_RETENTION_DAYS=30

# Bật sao lưu tự động
AUTO_BACKUP_ENABLED=true

# Lịch trình sao lưu (định dạng cron)
# Mặc định: 0 2 * * * (hàng ngày lúc 2:00 sáng)
BACKUP_SCHEDULE=0 2 * * *

# Nén bản sao lưu
BACKUP_COMPRESS=true

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================

# Các origin được phép (phân cách bằng dấu phẩy)
# Development: http://localhost,http://localhost:3000,http://localhost:5173
# Production: https://your-domain.com,https://www.your-domain.com
CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:5173

# Cho phép credentials
CORS_ALLOW_CREDENTIALS=true

# Các phương thức CORS
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH

# Các header CORS
CORS_ALLOW_HEADERS=*

# =============================================================================
# EMAIL / SMTP (TÙY CHỌN)
# =============================================================================

# Bật thông báo email
SMTP_ENABLED=false

# Máy chủ SMTP
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
# Cổng thông dụng: 587 (TLS), 465 (SSL), 25 (plain)

# Xác thực SMTP
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
# Với Gmail: Tạo App Password tại https://myaccount.google.com/apppasswords

# Người gửi email
SMTP_FROM=noreply@your-company.com
SMTP_FROM_NAME=Hệ Thống Quản Lý KPI

# Dùng TLS
SMTP_TLS=true

# Dùng SSL (nếu không dùng TLS)
SMTP_SSL=false

# Thư mục template email
EMAIL_TEMPLATES_DIR=/app/templates/email

# =============================================================================
# LOGGING (GHI LOG)
# =============================================================================

# Mức độ log
# Tùy chọn: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Đường dẫn file log
LOG_FILE=/data/logs/app.log

# Định dạng log
# Tùy chọn: json, text
LOG_FORMAT=text

# Xoay vòng log
LOG_MAX_SIZE=10485760
# 10485760 bytes = 10 MB

LOG_BACKUP_COUNT=5
# Giữ 5 file log backup

# Ghi log ra console
LOG_TO_CONSOLE=true

# =============================================================================
# TÀI KHOẢN ADMIN (Cài đặt ban đầu)
# =============================================================================

# Thông tin đăng nhập admin mặc định (dùng bởi script create_admin.py)
ADMIN_EMAIL=admin@company.com
ADMIN_PASSWORD=ChangeMe123!
# QUAN TRỌNG: Thay đổi mật khẩu này ngay sau lần đăng nhập đầu tiên!
ADMIN_FULLNAME=Quản Trị Viên Hệ Thống
ADMIN_DEPARTMENT=IT
ADMIN_POSITION=Quản Trị Viên

# =============================================================================
# TÍNH NĂNG ỨNG DỤNG
# =============================================================================

# Cho phép đăng ký người dùng (đặt false để tắt đăng ký công khai)
ENABLE_REGISTRATION=false

# Cho phép đặt lại mật khẩu
ENABLE_PASSWORD_RESET=true

# Cho phép xác minh email (cần SMTP)
ENABLE_EMAIL_VERIFICATION=false

# Cho phép thông báo
ENABLE_NOTIFICATIONS=true

# Khoảng thời gian polling thông báo (đơn vị giây)
NOTIFICATION_POLL_INTERVAL=30

# Cho phép bình luận
ENABLE_COMMENTS=true

# Cho phép upload file
ENABLE_FILE_UPLOADS=true

# Cho phép báo cáo
ENABLE_REPORTING=true

# Cho phép audit log
ENABLE_AUDIT_LOG=true

# =============================================================================
# TINH CHỈNH HIỆU NĂNG
# =============================================================================

# Số lượng Uvicorn workers
WORKERS=2
# Khuyến nghị: 2-4 workers cho 30 người dùng

# Worker timeout (đơn vị giây)
TIMEOUT=60

# Keep-alive timeout (đơn vị giây)
KEEP_ALIVE=5

# Số kết nối đồng thời tối đa
MAX_CONNECTIONS=100

# Bật nén gzip
ENABLE_GZIP=true

# Thời gian cache (đơn vị giây)
CACHE_TIMEOUT=300
# 300 giây = 5 phút

# =============================================================================
# PHÂN TRANG
# =============================================================================

# Số mục mặc định mỗi trang
DEFAULT_PAGE_SIZE=20

# Số mục tối đa mỗi trang
MAX_PAGE_SIZE=100

# =============================================================================
# PHIÊN LÀM VIỆC
# =============================================================================

# Thời gian timeout phiên (đơn vị giây)
SESSION_TIMEOUT=28800
# 28800 giây = 8 giờ

# Thời lượng "Ghi nhớ đăng nhập" (đơn vị ngày)
REMEMBER_ME_DAYS=30

# =============================================================================
# GIỚI HẠN TỐC ĐỘ (TÙY CHỌN)
# =============================================================================

# Bật giới hạn tốc độ
ENABLE_RATE_LIMIT=false

# Số request tối đa mỗi phút
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# GIÁM SÁT (TÙY CHỌN)
# =============================================================================

# Bật endpoint kiểm tra sức khỏe
ENABLE_HEALTH_CHECK=true

# Bật endpoint metrics
ENABLE_METRICS=false

# Sentry DSN (để theo dõi lỗi)
SENTRY_DSN=

# =============================================================================
# PHÁT TRIỂN (Chỉ cho môi trường development)
# =============================================================================

# Bật chế độ debug (KHÔNG BAO GIỜ bật trong production!)
DEBUG=false

# Bật tự động reload (chỉ development)
RELOAD=false

# Bật tài liệu API
ENABLE_DOCS=true
# Swagger UI: http://localhost:8000/docs
# ReDoc: http://localhost:8000/redoc

# Cho phép CORS từ tất cả origins (chỉ development)
CORS_ALLOW_ALL_ORIGINS=false

# =============================================================================
# CẤU HÌNH ĐẶC BIỆT CHO DOCKER
# =============================================================================

# Múi giờ container
TZ=Asia/Ho_Chi_Minh
# Hoặc: UTC, America/New_York, Europe/London, v.v.

# =============================================================================
# CÀI ĐẶT TÙY CHỈNH (Thêm cài đặt riêng của bạn ở đây)
# =============================================================================

# Tên công ty
COMPANY_NAME=Tên Công Ty Của Bạn

# URL logo công ty
COMPANY_LOGO_URL=/logo.png

# Email hỗ trợ
SUPPORT_EMAIL=support@company.com

# Số điện thoại hỗ trợ
SUPPORT_PHONE=+84 123 456 789

# Chế độ bảo trì hệ thống
MAINTENANCE_MODE=false

# Thông báo bảo trì
MAINTENANCE_MESSAGE=Hệ thống đang được bảo trì. Vui lòng quay lại sau.

# =============================================================================
# KẾT THÚC CẤU HÌNH
# =============================================================================

# Sau khi copy file này thành .env:
# 1. Tạo SECRET_KEY mới: openssl rand -hex 32
# 2. Cập nhật ADMIN_EMAIL và ADMIN_PASSWORD
# 3. Cập nhật CORS_ORIGINS với domain của bạn
# 4. Cấu hình SMTP nếu bạn muốn thông báo email
# 5. Xem xét và điều chỉnh các cài đặt khác theo nhu cầu
